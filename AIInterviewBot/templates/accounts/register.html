{% extends "accounts/AccountsBase.html" %} {% block title %}註冊{% endblock %}
{% block content %} {% load static %}
<div class="center">
  <div style="text-align: center">
    <img
      src="{% static 'images/LOGO.png' %}"
      alt="LOGO"
      width="90"
      height="108"
    />
  </div>
  <h1 class="register-title" style="text-align: left">使用者註冊</h1>
  <form method="post" id="register-form">
    {% csrf_token %}
    <!-- 註冊表單內容 -->
    <div class="txt_field">
      <div class="input-container">
        <img
          src="{% static 'images/user.png' %}"
          alt="user"
          width="18px"
          height="18px"
        />
        {{registerForm.username}}
        <label>{{ registerForm.username.label }}</label>
      </div>
    </div>
    <div class="txt_field">
      <div class="input-container">
        <img
          src="{% static 'images/lock.png' %}"
          alt="lock"
          width="18px"
          height="18px"
        />
        {{ registerForm.password1 }}
        <label>{{ registerForm.password1.label }}</label>
        <button
          type="button"
          class="toggle-password"
          data-target="id_password1"
        >
          <img
            src="{% static 'images/eye-slash-solid.png' %}"
            alt="顯示密碼"
            width="20"
            height="20"
          />
        </button>
      </div>
    </div>
    <div class="txt_field">
      <div class="input-container">
        <img
          src="{% static 'images/lock.png' %}"
          alt="lock"
          width="18px"
          height="18px"
        />
        {{ registerForm.password2 }}
        <label>{{ registerForm.password2.label }}</label>
        <button
          type="button"
          class="toggle-password"
          data-target="id_password2"
        >
          <img
            src="{% static 'images/eye-slash-solid.png' %}"
            alt="顯示密碼"
            width="20"
            height="20"
          />
        </button>
      </div>
    </div>
    <div class="txt_field">
      <div class="input-container">
        <img
          src="{% static 'images/mail.png' %}"
          alt="mail"
          width="18px"
          height="18px"
        />
        {{ registerForm.email }}
        <label>{{ registerForm.email.label }}</label>
      </div>
    </div>
    {% if registerForm.errors %}
    <div class="error text-danger">
      <ul>
        {% for field in registerForm %} {% for error in field.errors %}
        <li>{{ error }}</li>
        {% endfor %} {% endfor %}
      </ul>
    </div>
    {% endif %}
    <input
      type="submit"
      class="btn-submit"
      value="註冊"
      style="text-align: center"
    /><br />
  </form>
  <div class="signup_link">
    已經是會員?<a href="{% url 'Login'%}" style="color: #f7a22d"
      >&nbsp;立即登入</a
    >
  </div>
</div>

<script>
  $(document).ready(function () {
  	$('.toggle-password').click(function () {
  		const targetId = $(this).data('target');
  		const passwordInput = $(`#${targetId}`);

  		if (passwordInput.attr('type') === 'password') {
  			passwordInput.attr('type', 'text');
  			$(this).find('img').attr('src', '{% static 'images/eye-solid1.png' %}');
  		} else {
  			passwordInput.attr('type', 'password');
  			$(this).find('img').attr('src', '{% static 'images/eye-slash-solid.png' %}');
  		}
  	});
  });
</script>

{% include 'modal_template.html' %} {% if registration_success %}
<script>
  $(document).ready(function () {
    alertSuccess("註冊", function () {
      window.location.href = "{% url 'Login' %}";
    });
  });
</script>
{% endif %} {% endblock %}
